//åŸå¸‚çš„å¤©é™…çº¿æ˜¯ä»è¿œå¤„è§‚çœ‹è¯¥åŸå¸‚ä¸­æ‰€æœ‰å»ºç­‘ç‰©å½¢æˆçš„è½®å»“çš„å¤–éƒ¨è½®å»“ã€‚ç»™ä½ æ‰€æœ‰å»ºç­‘ç‰©çš„ä½ç½®å’Œé«˜åº¦ï¼Œè¯·è¿”å›ç”±è¿™äº›å»ºç­‘ç‰©å½¢æˆçš„ å¤©é™…çº¿ ã€‚ 
//
// æ¯ä¸ªå»ºç­‘ç‰©çš„å‡ ä½•ä¿¡æ¯ç”±æ•°ç»„ buildings è¡¨ç¤ºï¼Œå…¶ä¸­ä¸‰å…ƒç»„ buildings[i] = [lefti, righti, heighti] è¡¨ç¤ºï¼š 
//
//
// 
// lefti æ˜¯ç¬¬ i åº§å»ºç­‘ç‰©å·¦è¾¹ç¼˜çš„ x åæ ‡ã€‚ 
// righti æ˜¯ç¬¬ i åº§å»ºç­‘ç‰©å³è¾¹ç¼˜çš„ x åæ ‡ã€‚ 
// heighti æ˜¯ç¬¬ i åº§å»ºç­‘ç‰©çš„é«˜åº¦ã€‚ 
// 
//
// å¤©é™…çº¿ åº”è¯¥è¡¨ç¤ºä¸ºç”± â€œå…³é”®ç‚¹â€ ç»„æˆçš„åˆ—è¡¨ï¼Œæ ¼å¼ [[x1,y1],[x2,y2],...] ï¼Œå¹¶æŒ‰ x åæ ‡ è¿›è¡Œ æ’åº ã€‚å…³é”®ç‚¹æ˜¯æ°´å¹³çº¿æ®µçš„å·¦ç«¯ç‚¹ã€‚
//åˆ—è¡¨ä¸­æœ€åä¸€ä¸ªç‚¹æ˜¯æœ€å³ä¾§å»ºç­‘ç‰©çš„ç»ˆç‚¹ï¼Œy åæ ‡å§‹ç»ˆä¸º 0 ï¼Œä»…ç”¨äºæ ‡è®°å¤©é™…çº¿çš„ç»ˆç‚¹ã€‚æ­¤å¤–ï¼Œä»»ä½•ä¸¤ä¸ªç›¸é‚»å»ºç­‘ç‰©ä¹‹é—´çš„åœ°é¢éƒ½åº”è¢«è§†ä¸ºå¤©é™…çº¿è½®å»“çš„ä¸€éƒ¨åˆ†ã€‚ 
//
// æ³¨æ„ï¼šè¾“å‡ºå¤©é™…çº¿ä¸­ä¸å¾—æœ‰è¿ç»­çš„ç›¸åŒé«˜åº¦çš„æ°´å¹³çº¿ã€‚ä¾‹å¦‚ [...[2 3], [4 5], [7 5], [11 5], [12 7]...] æ˜¯ä¸æ­£ç¡®çš„ç­”
//æ¡ˆï¼›ä¸‰æ¡é«˜åº¦ä¸º 5 çš„çº¿åº”è¯¥åœ¨æœ€ç»ˆè¾“å‡ºä¸­åˆå¹¶ä¸ºä¸€ä¸ªï¼š[...[2 3], [4 5], [12 7], ...] 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šbuildings = [[2,9,10],[3,7,15],[5,12,12],[15,20,10],[19,24,8]]
//è¾“å‡ºï¼š[[2,10],[3,15],[7,12],[12,0],[15,10],[20,8],[24,0]]
//è§£é‡Šï¼š
//å›¾ A æ˜¾ç¤ºè¾“å…¥çš„æ‰€æœ‰å»ºç­‘ç‰©çš„ä½ç½®å’Œé«˜åº¦ï¼Œ
//å›¾ B æ˜¾ç¤ºç”±è¿™äº›å»ºç­‘ç‰©å½¢æˆçš„å¤©é™…çº¿ã€‚å›¾ B ä¸­çš„çº¢ç‚¹è¡¨ç¤ºè¾“å‡ºåˆ—è¡¨ä¸­çš„å…³é”®ç‚¹ã€‚ 
//
// ç¤ºä¾‹ 2ï¼š 
//
// 
//è¾“å…¥ï¼šbuildings = [[0,2,3],[2,5,3]]
//è¾“å‡ºï¼š[[0,3],[5,0]]
// 
//
// 
//
// æç¤ºï¼š 
//
// 
// 1 <= buildings.length <= 104 
// 0 <= lefti < righti <= 231 - 1 
// 1 <= heighti <= 231 - 1 
// buildings æŒ‰ lefti éé€’å‡æ’åº 
// 
// Related Topics æ ‘çŠ¶æ•°ç»„ çº¿æ®µæ ‘ æ•°ç»„ åˆ†æ²» æœ‰åºé›†åˆ æ‰«æçº¿ å †ï¼ˆä¼˜å…ˆé˜Ÿåˆ—ï¼‰ 
// ğŸ‘ 510 ğŸ‘ 0

  
package leetcode.problems.leetcode.editor.cn;

import java.util.*;
import java.util.Map.Entry;

public class No_218_TheSkylineProblem{
    public static void main(String[] args) {
       Solution solution = new No_218_TheSkylineProblem().new Solution();
    }
//leetcode submit region begin(Prohibit modification and deletion)
class Solution {
    /**
     * åˆè§æ€è·¯ï¼šè¿™é¢˜æœ‰ç‚¹æ‡µï¼Œæ²¡æœ‰åˆè§æ€è·¯
     * å‚è€ƒç­”æ¡ˆæ€è·¯ï¼šå¦™å•Šï¼
     *
     * @param buildings
     * @return
     */
    public List<List<Integer>> getSkyline(int[][] buildings) {
        List<List<Integer>> res = new ArrayList<>();
        //è®°å½•æ‰€æœ‰çŸ©å½¢çš„å·¦å³é¡¶ç‚¹
        List<int[]> points = new ArrayList<>();
        //è®°å½•ï¼Œå¹¶é¢„å¤„ç†ï¼ˆè¿™ä¸ªé¢„å¤„ç†å¦™å•Šï¼‰
        //åˆ†åˆ«è®°å½•å·¦å³é¡¶ç‚¹çš„æ¨ªåæ ‡å€¼å’Œé«˜åº¦ï¼Œ
        //è‹¥æ˜¯å·¦é¡¶ç‚¹ï¼Œé«˜åº¦å–è´Ÿå€¼ï¼Œç”¨ä»¥åŒºåˆ†å·¦å³é¡¶ç‚¹
        for(int[] i:buildings){
            int l = i[0];
            int r = i[1];
            int h = i[2];
            points.add(new int[]{l,-h});
            points.add(new int[]{r,h});
        }
        //å¯¹æ‰€æœ‰é¡¶ç‚¹è¿›è¡Œæ’åº
        Collections.sort(points, new Comparator<int[]>() {
            @Override
            public int compare(int[] o1, int[] o2) {
                if (o1[0]!=o2[0]){
                    return o1[0]-o2[0];
                }
                return o1[1]-o2[1];
            }
        });

        //å»ºç«‹ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ï¼ˆæœ€å¤§æ ¹å †å †ï¼‰ï¼Œæ¥ä¿è¯å¯ä»¥æ‹¿åˆ°å½“å‰æœ€é«˜çš„é«˜åº¦
        PriorityQueue<Integer> pq = new PriorityQueue<>(new Comparator<Integer>() {
            @Override
            public int compare(Integer o1, Integer o2) {
                return o2-o1;
            }
        });
        int prev = 0;
        pq.add(prev);

        for (int[] i:points){
            int point = i[0];
            int height = i[1];
            if(height<0){
                //è¡¨ç¤ºæ˜¯å·¦é¡¶ç‚¹ï¼Œä»è¯¥èŠ‚ç‚¹å¼€å§‹æœ‰é«˜åº¦ä¸ºheightçš„çº¿è¡ç”Ÿåˆ°å³é¡¶ç‚¹å¤„
                pq.add(-height);
            }else{
                //è¡¨ç¤ºæ˜¯å³èŠ‚ç‚¹,è¯´æ˜è¯¥heightçš„çº¿è¡ç”Ÿåˆ°æ­¤ç»“æŸäº†ï¼Œåˆ é™¤è¯¥é«˜åº¦
                pq.remove(height);
            }
            //å½“å‰çš„æœ€å¤§é«˜åº¦
            int cur = pq.peek();
            //å¦‚æœå½“å‰çš„æœ€å¤§é«˜åº¦å¤§äºå…ˆå‰çš„æœ€å¤§é«˜åº¦ï¼Œåˆ™è¯´æ˜è¯¥ç‚¹æ²¡æœ‰è¢«é®æŒ¡ï¼Œå¯ä»¥è®°å½•ä¸‹æ¥
            if(cur!=prev){
                List<Integer> p = new ArrayList<>();
                p.add(point);
                p.add(cur);
                prev = cur;
                res.add(p);
            }
        }
        return res;
    }

}
//leetcode submit region end(Prohibit modification and deletion)

}
